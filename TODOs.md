точно! вот **конкретный список заданий** для ИИ-агента/команды. Формат — «тикеты» с целями, входами/выходами, критериями приёмки, зависимостями и приоритетом. Разбито по этапам хакатона (D0–D3).

---

# Sprint D0 — Бутстрап (инфра, каркас)

## T-01 Репозиторий, шаблон сервиса и Docker Compose

* **Цель:** завести моно-репо с сервисами: `orchestrator`, `stt`, `tts`, `scoring`, `frontend`, `db`, `minio`.
* **Вход:** стек: Python/FastAPI, Postgres, MinIO(S3), Node+Vite (Vue/React).
* **Выход:** `docker-compose.yml`, `.env.sample`, базовые Dockerfile, Makefile.
* **Приёмка:** `make up` поднимает все контейнеры, `GET /healthz` по каждому сервису возвращает 200.
* **Зависимости:** нет. **Приоритет:** P0.

## T-02 Postgres и миграции

* **Цель:** завести базу и миграции.
* **Выход:** Alembic миграции для таблиц: `candidates, vacancies, questions, vacancy_questions, criteria, question_criteria, sessions, qa, qa_scores, media`.
* **Приёмка:** `alembic upgrade head` проходит; `SELECT count(*)` по каждой таблице выполняется.
* **Зависимости:** T-01. **Приоритет:** P0.

## T-03 Сид-данные для демо

* **Цель:** 1 вакансия, 6–8 вопросов, критерии/веса/must\_have.
* **Выход:** `seeds/*.sql|json`, скрипт `make seed`.
* **Приёмка:** после `make seed` `SELECT` возвращает не пусто.
* **Зависимости:** T-02. **Приоритет:** P0.

---

# Sprint D1 — Ядро интервью

## T-10 Orchestrator: модель сессии и шагов

* **Цель:** API для создания/ведения интервью.
* **Эндпоинты:**

  * `POST /sessions` (candidate\_id, vacancy\_id) → session\_id
  * `POST /sessions/{id}/next` → {question\_id, question\_text}
  * `POST /sessions/{id}/answer` (question\_id, audio\_url)
  * `GET /sessions/{id}` → прогресс/итоги
* **Приёмка:** happy-path через Postman симулирует весь сценарий.
* **Зависимости:** T-02, T-03. **Приоритет:** P0.

## T-11 Интеграция с SIP-провайдером (webhook-адаптер + симулятор)

* **Цель:** принять события звонка без настоящего провайдера и с ним.
* **Выход:**

  * `POST /webhooks/call` (start/record\_ready/end)
  * CLI-симулятор, который бьёт вебхуки и кладёт WAV в MinIO.
* **Приёмка:** эмуляция «звонок → запись ответа» отрабатывает end-to-end.
* **Оптимизация:** идемпотентность по заголовку `Idempotency-Key`.
* **Зависимости:** T-01, T-10. **Приоритет:** P0.

## T-12 STT-сервис с VAD

* **Цель:** превратить `audio_url` в транскрипт и маркеры пауз.
* **Вход:** WAV/OGG 8–16 кГц; VAD: `webrtcvad`.
* **API:** `POST /stt/transcribe {audio_url, lang}` → `{text, segments[], pre_answer_pause_s, speech_rate_wpm}`
* **Приёмка:** на 10 тест-аудио WER ≤ 18%, `pre_answer_pause_s` разумен.
* **Оптимизация:** денойзинг (pyannote/sox), батчи.
* **Зависимости:** T-01. **Приоритет:** P0.

## T-13 TTS-сервис + кэш

* **Цель:** синтез вопроса и кэширование одинаковых текстов.
* **API:** `POST /tts/synthesize {text, voice}` → `{audio_url, duration_ms}`
* **Приёмка:** одинаковый запрос → один и тот же URL из кэша; латентность < 1.5с на коротких репликах.
* **Оптимизация:** прегенерация всех вопросов при старте сессии.
* **Зависимости:** T-01. **Приоритет:** P1.

## T-14 Сервис оценки (LLM) — строгий JSON

* **Цель:** сопоставить ответ с критериями вопроса.
* **Вход:** `{vacancy_id, question_id, question, answer_text, criteria[]}`.
* **Выход:** `{overall_score, passed, per_criterion[], red_flags[], explanations[]}`.
* **Приёмка:** JSON проходит валидацию по схеме, ретрай при сбое 1 раз.
* **Оптимизация:** температура 0–0.2; prompt с примерами good/bad.
* **Зависимости:** T-03. **Приоритет:** P0.

## T-15 Tone & Паралингвистика

* **Цель:** вычислить `tone` и базовые поведенческие метрики.
* **API:** `POST /nlp/tone {text}` → `{tone, confidence}`;
  агрегация паралингвистики — в STT (см. T-12).
* **Приёмка:** детерминированный ответ на одинаковом тексте.
* **Зависимости:** T-12. **Приоритет:** P2.

## T-16 Запись результатов в БД

* **Цель:** сохранить `qa`, `qa_scores`, `media`, обновить `sessions.total_score`.
* **Приёмка:** после интервью все сущности непустые; агрегация «вес вопроса × вес критерия × score» совпадает с рассчитанным фронтом.
* **Зависимости:** T-10, T-12, T-14. **Приоритет:** P0.

---

# Sprint D2 — Панель HR и демо

## T-20 HR-Frontend (список сессий)

* **Цель:** таблица интервью, фильтры, статус, итоговый балл, красные флаги.
* **Приёмка:** виден список из сид-данных и реальной сессии.
* **Зависимости:** T-16. **Приоритет:** P0.

## T-21 Карточка кандидата

* **Цель:** транскрипты, «роза ветров», баллы по критериям, аудио-ссылки.
* **Приёмка:** визуально корректная «роза», кликабельные аудио; UX без блокировок.
* **Оптимизация:** ленивые запросы и пагинация по `qa`.
* **Зависимости:** T-20. **Приоритет:** P0.

## T-22 Переоценка ответа (manual review)

* **Цель:** дать HR возможность поправить баллы per-criterion.
* **API:** `POST /hr/qa/{id}/review {per_criterion_override[]}`
* **Приёмка:** пересчитан общий скор; аудит-лог с пользователем/временем.
* **Зависимости:** T-21. **Приоритет:** P2.

## T-23 Экспорт отчёта PDF/CSV

* **Цель:** выгрузка карточки интервию.
* **Приёмка:** скачивается PDF с диаграммой и таблицами; CSV — пер-критериальные баллы.
* **Зависимости:** T-21. **Приоритет:** P3.

---

# Sprint D3 — Качество, безопасность, демонстрация

## T-30 Наблюдаемость и алерты

* **Цель:** логирование (структурное), Sentry, метрики latency (STT/LLM/TTS), end-to-report.
* **Приёмка:** графики видны, трейс по request\_id восстанавливает шаги.
* **Зависимости:** все сервисы. **Приоритет:** P1.

## T-31 Политика приватности и PII

* **Цель:** маскирование телефонов/email в логах; presigned-URL аудио (TTL 15м); голосовое согласие в интро.
* **Приёмка:** логи без PII, ссылки истекают, интро проигрывается.
* **Зависимости:** T-13, T-16. **Приоритет:** P0.

## T-32 Тест-набор и e2e-скрипт демо

* **Цель:** 10–15 заготовок аудио, e2e «звонок → отчёт».
* **Приёмка:** скрипт `make demo` проходит, время до отчёта ≤ 2 мин.
* **Зависимости:** T-11..T-22. **Приоритет:** P0.

---

## Дополнительные мини-тикеты (параллелятся)

* **T-A1** Кэш TTS (LRU на тексте, версия по voice) — P1
* **T-A2** Буферизация STT с overlap 200–300 мс — P1
* **T-A3** JSON-валидация ответа LLM + «repair pass» — P0
* **T-A4** Ранний фейл по must\_have в Orchestrator — P0
* **T-A5** Идемпотентность вебхуков по `Idempotency-Key` — P0
* **T-A6** Предзагрузка аудио всех вопросов при старте сессии — P2

---

# Критерии готовности MVP (Definition of Done)

1. Проведён хотя бы один реальный звонок end-to-end.
2. Админка показывает список сессий и полную карточку кандидата.
3. LLM возвращает валидный JSON в 100% вызовов (после ретрая).
4. Определение конца ответа: пауза 2с **или** таймаут 60с; доля ошибок < 5%.
5. Хранение аудио в S3/MinIO, доступ по presigned-URL; PII не логируется.
6. `make demo` выдаёт отчёт за ≤ 2 минут после завершения интервью.

---

## Критика/риски и как их учитывать в задачах

* **Надёжность телефонии.** Поэтому T-11 включает симулятор вебхуков и загрузку WAV — демо возможно без реальной линии.
* **Шум/качество 8 кГц.** T-12 предусматривает денойзинг и VAD-порог; тест-набор в T-32.
* **Непредсказуемость LLM.** T-14/T-A3 — строгая схема, ретрай, fallback «не смог оценить» с меткой.
* **Этика/смещения.** В скор не включаем пол/тембр/акцент; Tone/паралингвистика — справочная мета (T-15).
* **Скорость демо.** Кэш TTS (T-A1) и прегенерация вопросов, параллельная подготовка следующего вопроса в Orchestrator.

---

Хочешь — превращу это в **issues.md** для репо (с чекбоксами) или **Jira CSV** для массового импорта задач.
